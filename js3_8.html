<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Animal Kingdom Visualizer ‚Äì Complete</title>

<style>
body {
  font-family: 'Courier New', monospace;
  background: linear-gradient(135deg, #283048, #859398);
  color: white;
  text-align: center;
  padding: 20px;
}

h1 {
  color: #ffcc70;
}

select, button {
  padding: 10px;
  margin: 5px;
  border-radius: 6px;
  border: none;
  font-weight: bold;
}

select {
  background: #222;
  color: white;
  border: 2px solid #ffcc70;
}

button {
  background: #ffcc70;
  color: black;
  cursor: pointer;
}

#output {
  background: #111;
  color: #00ffcc;
  padding: 15px;
  border-radius: 10px;
  width: 85%;
  margin: 20px auto;
  text-align: left;
}

#visual {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 20px;
}

.box {
  border: 2px solid #ffcc70;
  padding: 10px;
  border-radius: 8px;
  background: #222;
  min-width: 120px;
}

.arrow {
  font-size: 24px;
  align-self: center;
}
</style>

</head>
<body>

<h1>üêæ Animal Kingdom Visualizer</h1>

<select id="mode">
<option value="constructor">Constructor Functions</option>
<option value="class">Class Syntax</option>
<option value="object">Object.create()</option>
</select>

<br>

<button onclick="createDog()">Show Hierarchy</button>
<button onclick="makeSpeak()">Make Dog Speak</button>

<pre id="output"></pre>

<div id="visual"></div>

<script>

/////////////////////////////////////////////////////////
// CONSTRUCTOR VERSION
/////////////////////////////////////////////////////////

function Animal(name) {
  this.name = name;
}

Animal.prototype.speak = function() {
  return this.name + " makes a sound.";
};

function Mammal(name) {
  Animal.call(this, name);
}

Mammal.prototype = Object.create(Animal.prototype);
Mammal.prototype.constructor = Mammal;

function Dog(name) {
  Mammal.call(this, name);
}

Dog.prototype = Object.create(Mammal.prototype);
Dog.prototype.constructor = Dog;

Dog.prototype.speak = function() {
  return this.name + " barks! üêï";
};

/////////////////////////////////////////////////////////
// CLASS VERSION
/////////////////////////////////////////////////////////

class AnimalC {
  constructor(name) {
    this.name = name;
  }

  speak() {
    return this.name + " makes a sound.";
  }
}

class MammalC extends AnimalC {}

class DogC extends MammalC {
  speak() {
    return this.name + " barks loudly! üê∂";
  }
}

/////////////////////////////////////////////////////////
// OBJECT.CREATE VERSION
/////////////////////////////////////////////////////////

const AnimalO = {
  speak() {
    return this.name + " makes a sound.";
  }
};

const MammalO = Object.create(AnimalO);

const DogO = Object.create(MammalO);

DogO.speak = function() {
  return this.name + " barks happily! üêæ";
};

/////////////////////////////////////////////////////////
// VISUALIZER LOGIC
/////////////////////////////////////////////////////////

let dog = null;

function getPrototypeChain(obj) {

  const chain = [];
  let current = obj;

  while (current !== null) {

    if (current.constructor && current.constructor.name) {
      chain.push(current.constructor.name);
    } else {
      chain.push("Object.create()");
    }

    current = Object.getPrototypeOf(current);
  }

  chain.push("null");

  return chain;
}

function findSpeakOrigin(obj) {

  let current = obj;

  while (current) {

    if (current.hasOwnProperty("speak")) {

      if (current.constructor)
        return current.constructor.name;

      return "Object.create() object";
    }

    current = Object.getPrototypeOf(current);
  }

  return "Not found";
}

function visualize(chain) {

  const visual = document.getElementById("visual");
  visual.innerHTML = "";

  chain.forEach((item, index) => {

    const box = document.createElement("div");
    box.className = "box";
    box.innerText = item;

    visual.appendChild(box);

    if (index < chain.length - 1) {

      const arrow = document.createElement("div");
      arrow.className = "arrow";
      arrow.innerText = "‚¨á";

      visual.appendChild(arrow);
    }
  });
}

function createDog() {

  const mode = document.getElementById("mode").value;

  if (mode === "constructor") {
    dog = new Dog("Buddy");
  }

  else if (mode === "class") {
    dog = new DogC("Buddy");
  }

  else {
    dog = Object.create(DogO);
    dog.name = "Buddy";
  }

  const chain = getPrototypeChain(dog);

  const origin = findSpeakOrigin(dog);

  document.getElementById("output").textContent =
`MODE: ${mode}

Object Data:
${JSON.stringify(dog, null, 2)}

Prototype Chain:
${chain.join(" ‚Üí ")}

speak() method defined in:
${origin}`;

  visualize(chain);
}

function makeSpeak() {

  if (!dog) {
    alert("Click Show Hierarchy first");
    return;
  }

  const result = dog.speak();

  document.getElementById("output").textContent +=
`

Speak Result:
${result}`;
}

</script>

</body>
</html>
